# 1. Assignment 3: SLURM it all around!
## 1.1. The Goal
In the lectures, we discuss will discuss four systems for concurrently running programs on the network; SLURM, Dask, Spark and GNU Parallel. SLURM and Spark are fully-fledged schedulers while Dask and GNU Parallel are more user-centric. The latter two can hop onto SLURM though, to parallelize their operation. We will explore what this means for the speed of these programs, with an eye towards algorithmic complexity as well. We will start this assignment with the SLURM scheduler. It is installed on all computers on the BIoinformatics network; to check its status type sinfo in any terminal. See sample output below:

sinfo
In order to test the response of the scheduler to work, we will parallelize the venerable BLAST program. Many of you will know it from previous bioinformatics work, but for those of you who don't, it is essentially a really fast string matching algorithm which allow you to search huge databases of DNA, RNA and protein information with a query string. You are trying to find the proverbial needle (a gene, a protein subunit) in the haystack (all the known genes and proteins). There is a web version of this at the NCBI that you can try out. The NCBI Blast programs (blastn for nucleotide search, blastp for protein search etc.) are also installed on all the systems, including on assemblix2019 and assemblix2012. There are many options for blastn and blastp but the most important are "-db", "-query" and "-outfmt". You can ask for help using the "-help" command (or read the docs linked above). For us the most important factor is the "-numthreads" option, controlling how many CPU cores to use.
You can run blastp or blastn in the "assemblix" partition (that is, assemblix2012 or assemblix2019) because from those two computers pre-made BLAST databases are available. The databases are located at /local-fs/datasets/refseqprotein and /local-fs/datasets/refseqrna (but only on the assemblix computers, hence the need to run in the "assemblix" partition!). You need to make sure a variable called "BLASTDB" is defined pointing to directory where the databases are: /local-fs/datasets/refseq_protein/

## 1.2. Deliverables
You need to submit a bash script called assignment3.sh in the Assignment3 folder of your programming3 repository on GitHub. This script tests the blastp program with different "-numthreads" on the query file "MCRA.faa" (an Amino Acid file of the McrA protein involved in biogas production). This script makes an output directory called output when run, and places the run times for each blastp run in a file called timings.txt in the output directory. The timings should be based on the Linux "time" command (/usr/bin/time; make sure you're not using the built-in shell version, use the whole command name with path and all).
Your assignment is to run the program with -num_threads values from 1 to 16 and capture the time spent running in seconds
The output should be a file called timings.txt and a PNG format matplotlib graph showing number-of-threads on the x axis and time-taken (s) on the y axis, called timings.png. (Note: so you need to run a small python script as well to generate the graph).

NB: You need to make sure the BLASTDB variable is set to "local-fs/datasets" before the blastp command! Do this by including the "export BLASTDB=/local-fs/datasets/" command near the top of your script, before running BLAST!
